import{S as h,V as d,J as n,E as L,W as u}from"./index-73bd6dec.js";const o="orderList";function f(e){localStorage.setItem(o,JSON.stringify(e))}function S(){return JSON.parse(localStorage.getItem(o))}function g(){return localStorage.clear()}const m=h("cart",{state:()=>({cartList:[],selectList:[],orderList:[]}),getters:{totalNum(){return this.selectList.length},totalPrice(){let e=0;return this.orderList=[],g(),this.cartList.forEach(t=>{this.selectList.includes(t.id)&&(e+=t.counter*t.discountPrice,this.orderList.push({number:1,id:t.courseId}),f(this.orderList))}),e.toFixed(2)}},actions:{getCartList(){return new Promise((e,t)=>{d().then(s=>{let i=s.meta.code,a=s.meta.msg;i==200?(this.cartList=s.data.list,this.cartList.forEach(r=>{r.checked=!0,this.selectList.includes(r.id)||this.selectList.push(r.id)}),e(!0)):n(a)}).catch(s=>{t(s)})})},checkedAll(e){e?this.cartList.forEach(t=>{t.checked=!0,this.selectList.includes(t.id)||this.selectList.push(t.id)}):(this.cartList.map(t=>t.checked=!1),this.selectList=[])},checkItem(e,t){if(e)this.selectList.includes(t)||(this.selectList.push(t),this.cartList.map(s=>{s.id==t&&(s.checked=!0)}));else{let s=this.selectList.indexOf(t);this.selectList.splice(s,1),this.cartList.forEach(i=>{i.id==t&&(i.checked=!1)})}},deleteCourse(e){return new Promise((t,s)=>{L().then(i=>{if(i.meta.code==200){let r=i.data.token;u({id:e},r).then(c=>{if(c.meta.code==200){let l=this.selectList.indexOf(e);this.selectList.splice(l,1),t(!0)}}).catch(c=>{s(c)})}})})}}});export{S as g,g as r,f as s,m as u};
